use std::panic;
use rust_optimizer::optimize;

fn problem() -> (
    Vec<f32>,
    Vec<f32>, Vec<usize>, Vec<f32>,
    Vec<f32>,
    Vec<(usize, usize)>)
{
    let vtxl2xy = vec![
        0.0, 0.44495219,
        0.01798835, 0.37901258,
        0.03597671, 0.31307297,
        0.08087802, 0.25117152,
        0.12577933, 0.18927008,
        0.19284429, 0.20922147,
        0.25990925, 0.22917287,
        0.31960231, 0.17954815,
        0.41536495, 0.20478421,
        0.51112759, 0.23002027,
        0.60689024, 0.25525632,
        0.70265288, 0.28049238,
        0.79841552, 0.30572844,
        0.89417817, 0.3309645,
        0.98994081, 0.35620056,
        0.98671038, 0.43223306,
        0.98347995, 0.50826557,
        0.98024952, 0.58429807,
        1.0, 0.63255385,
        0.99405254, 0.72650285,
        0.98810508, 0.82045185,
        0.88937156, 0.81518912,
        0.79063805, 0.80992639,
        0.69190454, 0.80466366,
        0.59317103, 0.79940093,
        0.49443751, 0.79413819,
        0.40997919, 0.79940093,
        0.32552087, 0.80466366,
        0.24106254, 0.80992639,
        0.15660422, 0.81518912,
        0.0721459, 0.82045185,
        0.0459602, 0.72930028,
        0.0197745, 0.63814871,
        0.00988725, 0.54155045,
        0.0, 0.44495219];
    let site2xy = vec![
        0.28491979, 0.13489279,
        0.6017176, 0.1940188,
        0.49459345, 0.41327259,
        0.06940726, 0.34087542,
        0.25852828, 0.40456545,
        0.07813921, 0.64791354,
        0.22101018, 0.76049471,
        0.47205412, 0.63926244,
        0.07558851, 0.94805753,
        0.06097742, 0.01198044,
        0.80570092, 0.60743768,
        0.30859309, 0.92972624,
        0.60807224, 0.91034297,
        0.7262668, 0.32673491,
        0.87499822, 0.7815844,
        0.83753651, 0.97418581,
        0.88346317, 0.15924984,
        0.46831809, 0.02541823,
        0.99353099, 0.51600862,
        0.70621294, 0.01274023,
        0.11694457, 0.22313933,
        0.08167938, 0.73924326,
        0.50281405, 0.67901678,
        0.94482486, 0.41431446,
        0.89576776, 0.78649612];

    let site2room = vec![3, 4, 1, 3, 2, 0, 1, 0, 4, 2, 1, 2, 5, 5, 3, 5, 4, 0, 1, 0, 3, 2, 5, 0, 1];
    let site2xy2flag = vec![0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];
    let room2area_trg = vec![0.09799259, 0.09799259, 0.09799259, 0.09799259, 0.09799259, 0.04355226];
    let room_connections = vec![];
    (vtxl2xy,
     site2xy, site2room, site2xy2flag,
     room2area_trg,
     room_connections)
}

fn main() -> anyhow::Result<()> {
    let (vtxl2xy,
        site2xy, site2room, site2xy2flag,
        room2area_trg, room_connections) = problem();

    let create_gif = true;
    panic::catch_unwind(|| {
        optimize(
            vtxl2xy,
            site2xy,
            site2room,
            site2xy2flag,
            room2area_trg,
            room_connections,
            create_gif,
        )
    });

    Ok(())
}